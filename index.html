<!doctype html>
<html>

<head>
  <meta charset="utf-8" />
  <title>Melbourne Pixel Map</title>

  <!-- ğŸ® í”½ì…€ í°íŠ¸ -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

  <style>
    body {
      margin: 0;
      background: #f3efe3;
      font-family: 'Press Start 2P', monospace;
      text-align: center;
    }

    h1 {
      margin-top: 20px;
    }

    /* ğŸ® ê²Œì„ HUD ìŠ¤íƒ€ì¼ */
    .menu {
      margin: 15px 0;
    }

    .menu button {
      font-family: 'Press Start 2P';
      background: #222;
      color: #fff;
      border: 4px solid #000;
      padding: 10px 14px;
      margin: 4px;
      cursor: pointer;
    }

    .menu button:hover {
      background: #ffcc00;
      color: #000;
    }

    /* ğŸ® ê²Œì„ í”„ë ˆì„ ì§€ë„ */
    #map {
      width: 92%;
      height: 65vh;
      margin: auto;
      border: 8px solid black;
      box-shadow:
        0 0 0 8px #4a4a4a,
        0 0 0 16px #222;
    }

    /* ğŸ® í”½ì…€ íŒì—… ìŠ¤íƒ€ì¼ */
    .gm-style .gm-style-iw-c {
      border-radius: 0 !important;
      padding: 12px !important;
      font-family: 'Press Start 2P';
    }
  .retro-popup{
    background:#f4f1e8;
    border:2px solid #000;
    padding:8px 12px;
    font-family:'Press Start 2P', monospace;
    font-size:10px;
    line-height:1.4;
  }
  </style>
</head>

<body>

  <h1>ğŸŒ Melbourne Pixel Map</h1>
  <p>Explore like a retro adventure ğŸ®</p>

  <!-- ğŸ® ì¹´í…Œê³ ë¦¬ ë©”ë‰´ -->
  <div class="menu">
    <button onclick="showCategory('all')">ALL</button>
    <button onclick="showCategory('food')">FOOD</button>
    <button onclick="showCategory('shop')">SHOP</button>
    <button onclick="showCategory('landmark')">LANDMARK</button>
  </div>

  <div id="map"></div>

  <script>
    let map;
    let markers = [];

    function initMap() {
      const melbourne = { lat: -37.8136, lng: 144.9631 };

      map = new google.maps.Map(document.getElementById("map"), {
        zoom: 13,
        center: melbourne,
        disableDefaultUI: true,
        styles: [
          { featureType: "all", elementType: "labels", stylers: [{ visibility: "off" }] },
          { featureType: "poi", stylers: [{ visibility: "off" }] },
          { featureType: "transit", stylers: [{ visibility: "off" }] },

          { featureType: "landscape", elementType: "geometry", stylers: [{ color: "#f3efe3" }] },
          { featureType: "water", elementType: "geometry", stylers: [{ color: "#b7d3d0" }] },
          { featureType: "road", elementType: "geometry", stylers: [{ color: "#a08f6d" }] },
          { featureType: "road.local", elementType: "geometry", stylers: [{ color: "#c2b59b" }] },
          { featureType: "poi.park", elementType: "geometry", stylers: [{ color: "#d8e2c8" }] }
        ]
      });

      // âœ… ì—¬ê¸°ì„œ ë§ˆì»¤ë“¤ ì¶”ê°€
    addMarker(-37.8183, 144.9671, "Flinders Street Station", "landmark", "icons/landmark-flinders.png");
    addMarker(-37.8122, 144.9623, "Queen Victoria Market", "shop");
    addMarker(-37.8150, 144.9605, "Hardware SociÃ©tÃ©", "food");
  }

  // âœ… initMap ë°–ì— ìˆì–´ì•¼ í•¨!
  function addMarker(lat, lng, title, category, iconFile = null) {
    const marker = new google.maps.Marker({
      position: { lat, lng },
      map,
      title,
      icon: iconFile ? {
        url: iconFile,
        scaledSize: new google.maps.Size(52, 52),
        anchor: new google.maps.Point(26, 52)
      } : null
    });

function updateMarkerSize() {
  const zoom = map.getZoom();

  let size = 40;

  if (zoom >= 15) size = 70;
  else if (zoom >= 14) size = 60;
  else if (zoom >= 13) size = 52;
  else size = 40;

  markers.forEach(marker => {
    if (marker.getIcon()) {
      marker.setIcon({
        url: marker.getIcon().url,
        scaledSize: new google.maps.Size(size, size),
        anchor: new google.maps.Point(size/2, size)
      });
    }
  });
}
    map.addListener("zoom_changed", updateMarkerSize);
    
    marker.category = category;

  const info = new google.maps.InfoWindow({
    content: `
      <div class="retro-popup">
        ${title}
      </div>
    `
  });

  marker.addListener("click", () => info.open(map, marker));
  markers.push(marker);
}

    function showCategory(category) {
      markers.forEach(marker => {
        if (category === "all" || marker.category === category) {
          marker.setMap(map);
        } else {
          marker.setMap(null);
        }
});
    }
  </script>

  <script async
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBOL2NKHM4lBk7SMTaaVMYsJPGQmEpvylw&callback=initMap">
  </script>
